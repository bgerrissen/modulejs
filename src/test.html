
<html>
<head>
    <title></title>
</head>
<body>

<script src="module.js"></script>
<script>

    require.config({
        debug : true
    })

    require.listen( "error" , function ( e ) {

        console.log( e );

    });


    require.plugin( "grab" , function ( record , param ) {

        var list = param.replace( /\s*/g , "" ).split( "," )
        , i = list.length
        , data = {};

        require.listen( "loaded" , function ( e ) {

            if ( e.record === record ) {

                e.deafen();

                if ( i === 1 ) {

                    data.module =  window[ list[ 0 ] ];

                } else if ( i > 1 ) {

                    data.module = {};

                    while ( i-- ) {

                        data.module[ list[ i ] ] = window[ list[ i ] ];

                    }

                }

                require._insertStack.push( data );

            }

        } );

    } );

    require.plugin( "clean" , function ( record , param ) {

        var list = param.replace( /\s*/g , "" ).split( "," )
        , i = list.length
        , data = {};

        require.listen( "complete" , function ( e ) {

            if ( e.record === record ) {

                e.deafen();

                while ( i-- ) {

                    this[ list[ i ] ] = null;
                    delete this[ list[ i ] ];

                }

            }

        } );

    } );

    require.plugin( "final" , function ( record , param ) {

        record.context = "";
        record.extention = "";

    } );

    require( [ "test !grab( test ) !clean( test )" ] , function ( serf ) {

        serf();

        console.log( test )

    });

    require( [ "test.js !final() !grab(test)" ] , function ( ook ) {

        console.log( ook )

    } );


    
</script>
</body>
</html>